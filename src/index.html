<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Docker Database Manager</title>
    <script type="module" src="/icons.js"></script>
    <script type="module" src="/main.js?v=9999999999" defer></script>
  </head>

  <body>
    <div id="app">
      <!-- Header -->
      <header class="app-header">
        <div class="header-content">
          <div class="header-left">
            <div class="app-icon">DB</div>
            <div class="app-title-group">
              <h1>Docker DB Manager</h1>
              <p id="docker-status">Checking Docker...</p>
            </div>
          </div>
          <div class="header-right">
            <!-- Dark mode toggle will be inserted here by JS -->
            <button id="refresh-btn" class="btn btn-secondary btn-sm" data-tooltip="Refresh">
              Refresh
            </button>
            <button id="new-db-btn" class="btn btn-primary btn-sm" onclick="openCreateModal()" data-tooltip="New Database">
              New Database
            </button>
          </div>
        </div>
      </header>

      <!-- Tabs Navigation -->
      <div class="tabs-container">
        <nav class="tabs-wrapper">
          <button
            class="tab-btn active"
            data-tab="dashboard"
            onclick="switchTab('dashboard')"
          >
            <span class="tab-icon"></span>
            <span>Dashboard</span>
          </button>
          <button
            class="tab-btn"
            data-tab="databases"
            onclick="switchTab('databases')"
          >
            <span class="tab-icon"></span>
            <span>Databases</span>
          </button>
          <button
            class="tab-btn"
            data-tab="images"
            onclick="switchTab('images')"
          >
            <span class="tab-icon"></span>
            <span>Images</span>
          </button>
          <button
            class="tab-btn"
            data-tab="migration"
            onclick="switchTab('migration')"
          >
            <span class="tab-icon"></span>
            <span>Migration</span>
          </button>
          <button
            class="tab-btn"
            data-tab="volumes"
            onclick="switchTab('volumes')"
          >
            <span class="tab-icon"></span>
            <span>Volumes</span>
          </button>
          <button
            class="tab-btn"
            data-tab="compose"
            onclick="switchTab('compose')"
          >
            <span class="tab-icon"></span>
            <span>Compose</span>
          </button>
          <button
            class="tab-btn"
            data-tab="templates"
            onclick="switchTab('templates')"
          >
            <span class="tab-icon"></span>
            <span>Templates</span>
          </button>
          <button
            class="tab-btn"
            data-tab="settings"
            onclick="switchTab('settings')"
          >
            <span class="tab-icon"></span>
            <span>Settings</span>
          </button>
        </nav>
      </div>

      <!-- Main Content -->
      <main class="main-content">
        <div class="content-container">
          
          <!-- Tab: Dashboard -->
          <section id="tab-dashboard" class="tab-content active">
            <!-- Stats Cards -->
            <div class="dashboard-stats">
              <div class="stat-card">
                <div class="stat-icon primary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14a2 2 0 0 0 9 3 2 2 0 0 0 9-3V5"/><path d="M3 12a9 3 0 0 0 18 0"/></svg>
                </div>
                <div class="stat-content">
                  <h3>Total Containers</h3>
                  <p id="stat-total">0</p>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon success">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                </div>
                <div class="stat-content">
                  <h3>Running</h3>
                  <p id="stat-running">0</p>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon warning">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/></svg>
                </div>
                <div class="stat-content">
                  <h3>Stopped</h3>
                  <p id="stat-stopped">0</p>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon info">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                </div>
                <div class="stat-content">
                  <h3>Images</h3>
                  <p id="stat-images">0</p>
                </div>
              </div>
            </div>

            <!-- Recent Containers -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Recent Containers</h2>
              </div>
              <div id="recent-containers"></div>
            </div>
          </section>

        <!-- Tab: Dashboard -->
        <section id="tab-dashboard-old" class="tab-content" style="display: none;">
          <div class="containers-section">
            <!-- Stats Cards -->
            <div class="stats-grid" style="display: none;">
              <div class="stat-card">
                <div class="stat-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/><line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                </div>
                <div class="stat-content">
                  <span class="stat-label">Total Containers</span>
                  <span class="stat-value" id="stat-total-old">0</span>
                </div>
              </div>

              <div class="stat-card stat-running">
                <div class="stat-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                </div>
                <div class="stat-content">
                  <span class="stat-label">Running</span>
                  <span class="stat-value" id="stat-running-old">0</span>
                </div>
              </div>

              <div class="stat-card stat-stopped">
                <div class="stat-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/></svg>
                </div>
                <div class="stat-content">
                  <span class="stat-label">Stopped</span>
                  <span class="stat-value" id="stat-stopped">0</span>
                </div>
              </div>

              <div class="stat-card stat-images">
                <div class="stat-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                </div>
                <div class="stat-content">
                  <span class="stat-label">Images</span>
                  <span class="stat-value" id="stat-images">0</span>
                </div>
              </div>
            </div>

            <!-- Quick Actions -->
            <div class="dashboard-section">
              <h2 class="section-title">Quick Actions</h2>
              <div class="quick-actions">
                <button class="quick-action-btn" onclick="openCreateModal()">
                  <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                  </div>
                  <span>New Database</span>
                </button>

                <button class="quick-action-btn" onclick="switchTab('databases')">
                  <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5"/></svg>
                  </div>
                  <span>View All Databases</span>
                </button>

                <button class="quick-action-btn" onclick="switchTab('migration')">
                  <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                  </div>
                  <span>Migrate Database</span>
                </button>

                <button class="quick-action-btn" onclick="loadContainers()">
                  <div class="quick-action-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></svg>
                  </div>
                  <span>Refresh</span>
                </button>
              </div>
            </div>

            <!-- Recent Activity -->
            <div class="dashboard-section">
              <h2 class="section-title">Recent Containers</h2>
              <div id="recent-containers" class="recent-containers">
                <!-- Populated by JavaScript -->
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Databases -->
        <section id="tab-databases" class="tab-content">
          <!-- Page Header -->
          <div class="section-header">
            <div>
              <h2>Docker Databases</h2>
              <p class="section-description">Manage your database containers</p>
            </div>
            <div class="section-actions">
              <button class="btn btn-primary" onclick="openCreateModal()" data-tooltip="Create new database">
                Create Database
              </button>
            </div>
          </div>
          
          <!-- Search and Filters Component -->
          <div id="search-filters">
            <!-- Will be populated by JavaScript -->
          </div>
          
          <div class="results-info">
            <span id="results-count"></span>
          </div>
          
          <div id="containers-list" class="containers-grid">
            <!-- Containers will be loaded here -->
          </div>
          <div id="no-containers" class="empty-state" style="display: none">
            <div class="empty-state-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14a2 2 0 0 0 9 3 2 2 0 0 0 9-3V5"/><path d="M3 12a9 3 0 0 0 18 0"/></svg>
            </div>
            <h3 class="empty-state-title">No databases created yet</h3>
            <p class="empty-state-description">Create your first database to get started</p>
          </div>
        </section>

        <!-- Tab: Images -->
        <section id="tab-images" class="tab-content">
          <!-- Page Header -->
          <div class="section-header">
            <div>
              <h2>Docker Images</h2>
              <p class="section-description">Manage your Docker images</p>
            </div>
            <div class="section-actions">
              <button class="btn btn-primary" onclick="openPullImageModal()" data-tooltip="Pull new image">
                Pull Image
              </button>
            </div>
          </div>
          
          <!-- Search and Filters Component -->
          <div id="search-filters-images">
            <!-- Will be populated by JavaScript -->
          </div>
          
          <div class="results-info">
            <span id="results-count-images"></span>
          </div>
          
          <div id="images-list" class="images-grid">
            <!-- Images will be loaded here -->
          </div>
          <div id="no-images" class="empty-state" style="display: none">
            <div class="empty-state-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
            </div>
            <h3 class="empty-state-title">No images downloaded</h3>
            <p class="empty-state-description">Pull an image or create a database to get started</p>
          </div>
        </section>

        <!-- Tab: Migration -->
        <section id="tab-migration" class="tab-content">
          <div class="section-header">
            <div>
              <h2>Local Database Migration</h2>
              <p class="section-description">Migrate your local PostgreSQL databases to Docker containers</p>
            </div>
          </div>

          <!-- Connection Status -->
          <div id="local-postgres-status" class="card">
            <div class="status-indicator">
                <span class="status-dot" id="status-dot"></span>
                <span id="status-text">Checking local PostgreSQL...</span>
              </div>
              <button
                id="refresh-local-btn"
                class="btn btn-ghost btn-sm"
                onclick="checkLocalPostgres()"
              ></button>
            </div>

            <!-- Connection Form -->
            <div id="connection-form" class="connection-form" style="display: none">
              <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--spacing-md);">
                <h3 style="margin: 0;">Connect to Local PostgreSQL</h3>
                <button type="button" class="btn btn-ghost btn-sm" onclick="applyMigrationDefaults()" data-tooltip="Load default values from settings">
                  Load Defaults
                </button>
              </div>
              <p class="form-help-text">
                Enter your local PostgreSQL credentials to list and migrate databases
              </p>
              <form id="local-pg-form" onsubmit="connectLocalPostgres(event)">
                <div class="form-row">
                  <div class="form-group">
                    <label for="local-host">Host:</label>
                    <input
                      type="text"
                      id="local-host"
                      value="localhost"
                      required
                      placeholder="localhost"
                      autocomplete="off"
                      autocorrect="off"
                      autocapitalize="off"
                      spellcheck="false"
                    />
                  </div>
                  <div class="form-group">
                    <label for="local-port">Port:</label>
                    <input
                      type="number"
                      id="local-port"
                      value="5432"
                      required
                      min="1024"
                      max="65535"
                      placeholder="5432"
                      autocomplete="off"
                    />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="local-user">User:</label>
                    <input 
                      type="text" 
                      id="local-user" 
                      value="postgres" 
                      required 
                      placeholder="postgres"
                      autocomplete="off"
                      autocorrect="off"
                      autocapitalize="off"
                      spellcheck="false"
                    />
                  </div>
                  <div class="form-group">
                    <label for="local-password">Password:</label>
                    <input 
                      type="password" 
                      id="local-password" 
                      placeholder="Leave empty if no password"
                      autocomplete="off"
                      autocorrect="off"
                      autocapitalize="off"
                      spellcheck="false"
                    />
                  </div>
                </div>
                <button type="submit" class="btn btn-primary">
                  Connect & Load Databases
                </button>
              </form>
            </div>

            <!-- Local Databases List -->
            <div id="local-databases-container" style="display: none">
              <h3>Available Local Databases</h3>
              
              <!-- Search and Filters will be inserted here -->
              <div id="search-filters-migration">
                <!-- Will be populated by JavaScript -->
              </div>
              
              <div class="results-info">
                <span id="results-count-migration"></span>
              </div>
              
              <div id="local-databases-list" class="local-databases-grid">
                <!-- Local databases will be loaded here -->
              </div>
              <div id="no-local-databases" class="no-data" style="display: none">
                <p>No databases found in local PostgreSQL</p>
              </div>
            </div>

            <!-- Migrated Databases List -->
            <div id="migrated-databases-container" style="display: none">
              <h3>Migrated Databases</h3>
              <p class="section-description">
                These databases have been migrated from local PostgreSQL to Docker
              </p>
              <div id="migrated-databases-list" class="local-databases-grid">
                <!-- Migrated databases will be loaded here -->
              </div>
              <div id="no-migrated-databases" class="no-data" style="display: none">
                <p>No databases have been migrated yet</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Volumes -->
        <section id="tab-volumes" class="tab-content">
          <div class="volumes-section">
            <div class="section-header">
              <div>
                <h2>Docker Volumes</h2>
                <p class="section-description">Manage Docker volumes, create backups, and restore data</p>
              </div>
              <div class="section-actions">
                <button id="refresh-volumes-btn" class="btn btn-ghost" onclick="loadVolumes()" data-tooltip="Refresh volumes">
                  Refresh
                </button>
                <button id="prune-volumes-btn" class="btn btn-warning" onclick="confirmPruneVolumes()" data-tooltip="Remove unused volumes">
                  Clean Orphans
                </button>
              </div>
            </div>

            <!-- Volumes List -->
            <div id="volumes-list" class="volumes-grid">
              <!-- Volumes will be loaded here -->
            </div>
            <div id="no-volumes" class="no-data" style="display: none">
              <p>No volumes found</p>
            </div>
          </div>
        </section>

        <!-- Tab: Compose -->
        <section id="tab-compose" class="tab-content">
          <div id="compose-tab-content">
            <!-- Compose content will be loaded here -->
          </div>
        </section>

        <!-- Tab: Templates -->
        <section id="tab-templates" class="tab-content">
          <div class="templates-section">
            <div id="templates-tab-content">
              <!-- Templates will be loaded here -->
            </div>
          </div>
        </section>

        <!-- Tab: Settings -->
        <section id="tab-settings" class="tab-content">
          <div class="settings-container">
            <div class="section-header">
              <div>
                <h2>Settings</h2>
                <p class="section-description">Configure your Docker DB Manager preferences</p>
              </div>
            </div>

            <!-- Appearance Settings -->
            <div class="settings-section">
              <div class="settings-section-header">
                <h3>Appearance</h3>
                <p>Customize the look and feel of the application</p>
              </div>
              <div class="settings-group">
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Theme</label>
                    <p class="setting-description">Cambia el esquema de colores de toda la aplicación inmediatamente</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-theme"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Compact Mode</label>
                    <p class="setting-description">Reduce TODOS los espacios entre elementos en un 25-50% para ver más contenido</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-compact-mode">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Animations</label>
                    <p class="setting-description">Desactiva TODAS las animaciones y transiciones (más rápido pero menos visual)</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-animations">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Migration Settings -->
            <div class="settings-section">
              <div class="settings-section-header">
                <h3>Migration</h3>
                <p>Default connection settings for local database migration</p>
              </div>
              <div class="settings-group">
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Default Host</label>
                    <p class="setting-description">Default PostgreSQL host address</p>
                  </div>
                  <div class="setting-control">
                    <input type="text" id="setting-migration-host" class="setting-input" placeholder="localhost">
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Default Port</label>
                    <p class="setting-description">Default PostgreSQL port</p>
                  </div>
                  <div class="setting-control">
                    <input type="number" id="setting-migration-port" class="setting-input" placeholder="5432" min="1024" max="65535">
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Default Username</label>
                    <p class="setting-description">Default PostgreSQL username</p>
                  </div>
                  <div class="setting-control">
                    <input type="text" id="setting-migration-user" class="setting-input" placeholder="postgres">
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Default Password</label>
                    <p class="setting-description">Default PostgreSQL password (stored locally)</p>
                  </div>
                  <div class="setting-control">
                    <input type="password" id="setting-migration-password" class="setting-input" placeholder="Leave empty if no default">
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Remember Credentials</label>
                    <p class="setting-description">Save credentials after successful connection</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-remember-credentials">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Monitoring Settings -->
            <div class="settings-section">
              <div class="settings-section-header">
                <h3>Monitoring</h3>
                <p>Configure container monitoring behavior</p>
              </div>
              <div class="settings-group">
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Update Interval</label>
                    <p class="setting-description">Cambia cada cuánto se actualizan las stats de CPU/RAM/Network/Disk (más rápido = más preciso pero más carga)</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-monitoring-interval"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Chart Type</label>
                    <p class="setting-description">Tipo de gráfica que se muestra por defecto al abrir monitoring (line/area/bar)</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-chart-type"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">History Duration</label>
                    <p class="setting-description">Cuántos segundos de historial se muestran en las gráficas de monitoring</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-history-duration"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Show Alerts</label>
                    <p class="setting-description">Muestra avisos cuando CPU > 80% o RAM > 85% en monitoring</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-show-alerts">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Database Settings -->
            <div class="settings-section">
              <div class="settings-section-header">
                <h3>Database</h3>
                <p>Default settings for new database containers</p>
              </div>
              <div class="settings-group">
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Auto-start Containers</label>
                    <p class="setting-description">Los nuevos containers se inician automáticamente después de crearlos</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-auto-start">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Show Connection URL</label>
                    <p class="setting-description">Muestra la URL de conexión en las cards de las bases de datos</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-show-url">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Default Database Type</label>
                    <p class="setting-description">Preselecciona este tipo al abrir "New Database" (útil si siempre usas el mismo)</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-default-db-type"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Confirm Delete</label>
                    <p class="setting-description">Pide confirmación antes de eliminar containers, images o volumes</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-confirm-delete">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Notifications Settings -->
            <div class="settings-section">
              <div class="settings-section-header">
                <h3>Notifications</h3>
                <p>Control notification behavior</p>
              </div>
              <div class="settings-group">
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Notification Duration</label>
                    <p class="setting-description">Cuántos segundos permanecen visibles las notificaciones antes de desaparecer</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-notification-duration"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Sound Notifications</label>
                    <p class="setting-description">Reproduce un sonido cuando hay errores o warnings</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-sound-notifications">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Success Notifications</label>
                    <p class="setting-description">Muestra notificaciones verdes para operaciones exitosas (desactiva para menos ruido)</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-show-success">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Performance Settings -->
            <div class="settings-section">
              <div class="settings-section-header">
                <h3>Performance</h3>
                <p>Optimize application performance</p>
              </div>
              <div class="settings-group">
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Auto Refresh</label>
                    <p class="setting-description">Actualiza automáticamente los datos en segundo plano mientras usas la app</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-auto-refresh">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Refresh Interval</label>
                    <p class="setting-description">Cada cuántos segundos se actualizan automáticamente los datos (containers, images, etc)</p>
                  </div>
                  <div class="setting-control">
                    <div id="setting-refresh-interval"></div>
                  </div>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <label class="setting-label">Lazy Load Images</label>
                    <p class="setting-description">Carga las imágenes de Docker solo cuando abres la pestaña Images (más rápido si tienes muchas imágenes)</p>
                  </div>
                  <div class="setting-control">
                    <label class="toggle-switch">
                      <input type="checkbox" id="setting-lazy-load">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Actions -->
            <div class="settings-actions">
              <button class="btn btn-secondary" onclick="resetSettings()">Reset to Defaults</button>
              <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>
          </div>
        </section>
      </main>

      <!-- Modal: Create Database -->
      <div id="create-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modal-title">Create New Database</h2>
            <button class="close-btn" onclick="closeCreateModal()">×</button>
          </div>
          <form id="create-form" class="modal-body">
            <!-- Step 1: Select Database Type -->
            <div id="step-1" class="form-step">
              <h3>Select database type:</h3>
              <div id="db-types-grid" class="db-types-grid">
                <!-- Database types will be loaded here -->
              </div>
            </div>

            <!-- Step 2: Configure Database -->
            <div id="step-2" class="form-step" style="display: none">
              <button
                type="button"
                class="btn-back"
                onclick="goBackToStep1()"
              ></button>

              <div class="selected-db-type">
                <span id="selected-db-icon" class="db-icon-large"></span>
                <span id="selected-db-name"></span>
              </div>

              <div class="form-group">
                <label for="db-template">Template (optional):</label>
                <div id="db-template-select"></div>
                <p class="form-help-text">Select a template to apply optimized configurations</p>
              </div>

              <div class="form-group">
                <label for="db-name">Database Name:</label>
                <input
                  type="text"
                  id="db-name"
                  required
                  placeholder="my_database"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                />
              </div>

              <div class="form-group" id="username-group">
                <label for="db-username">Username:</label>
                <input type="text" id="db-username" placeholder="user" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              </div>

              <div class="form-group" id="password-group">
                <label for="db-password">Password:</label>
                <input
                  type="password"
                  id="db-password"
                  placeholder="••••••••"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                />
              </div>

              <div class="form-group">
                <label for="db-port">Port:</label>
                <input
                  type="number"
                  id="db-port"
                  required
                  placeholder="5544"
                  min="1024"
                  autocomplete="off"
                  max="65535"
                />
              </div>

              <div class="form-group">
                <label for="db-version">Version:</label>
                <div id="db-version-select"></div>
              </div>
            </div>
          </form>
          
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-ghost"
              onclick="closeCreateModal()"
            >
              Cancel
            </button>
            <button type="button" class="btn btn-primary" onclick="document.getElementById('create-form').requestSubmit()">Create</button>
          </div>
        </div>
      </div>

      <!-- Modal: Logs -->
      <div id="logs-modal" class="modal">
        <div class="modal-content modal-large">
          <div class="modal-header">
            <h2>Container Logs</h2>
            <button class="close-btn" onclick="closeLogsModal()">×</button>
          </div>
          <div class="modal-body">
            <div id="logs-content" class="logs-container">
              <p>Loading logs...</p>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-ghost" onclick="closeLogsModal()">
              Close
            </button>
          </div>
        </div>
      </div>

      <!-- Modal: Rename Container -->
      <div id="rename-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Rename Container</h2>
            <button class="close-btn" onclick="closeRenameModal()">×</button>
          </div>
          <form id="rename-form" onsubmit="executeRename(event)">
            <div class="modal-body">
              <p>Rename container: <strong id="rename-current-name"></strong></p>
              <div class="form-group">
                <label for="rename-new-name">New Name:</label>
                <input
                  type="text"
                  id="rename-new-name"
                  required
                  placeholder="my_database_renamed"
                  pattern="[a-zA-Z0-9_-]+"
                  title="Only letters, numbers, hyphens and underscores allowed"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                />
                <small>Only letters, numbers, hyphens (-) and underscores (_) are allowed</small>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" onclick="closeRenameModal()">Cancel</button>
              <button type="submit" class="btn btn-primary">Rename</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal: Edit Port -->
      <div id="edit-port-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Edit Container Port</h2>
            <button class="close-btn" onclick="closeEditPortModal()">×</button>
          </div>
          <form id="edit-port-form" onsubmit="executeEditPort(event)">
            <div class="modal-body">
              <p>Change port for container: <strong id="edit-port-container-name"></strong></p>
              <div class="form-group">
                <label for="edit-port-current">Current Port:</label>
                <input
                  type="text"
                  id="edit-port-current"
                  disabled
                  style="background: var(--bg-secondary); cursor: not-allowed;"
                />
              </div>
              <div class="form-group">
                <label for="edit-port-new">New Port:</label>
                <input
                  type="number"
                  id="edit-port-new"
                  required
                  placeholder="5433"
                  min="1024"
                  max="65535"
                  autocomplete="off"
                />
                <small>⚠️ Warning: The container will be recreated with the new port. It must be stopped first.</small>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" onclick="closeEditPortModal()">Cancel</button>
              <button type="submit" class="btn btn-primary">Update Port</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal: SQL Console -->
      <div id="sql-modal" class="modal">
        <div class="modal-content modal-large">
          <div class="modal-header">
            <h2>SQL Console</h2>
            <button class="close-btn" onclick="closeSqlModal()">×</button>
          </div>
          <div class="modal-body">
            <form id="sql-form">
              <div class="form-group">
                <label for="sql-query">SQL Query:</label>
                <textarea
                  id="sql-query"
                  rows="6"
                  placeholder="SELECT * FROM table;"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                ></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Execute</button>
            </form>
            <div id="sql-result" class="sql-result">
              <h3>Result:</h3>
              <pre id="sql-output">Results will appear here...</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none">
      <div class="spinner"></div>
      <p id="loading-text">Loading...</p>
    </div>

    <!-- Backup Volume Modal -->
    <div id="backup-volume-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Backup Volume</h3>
          <button class="modal-close" onclick="closeBackupVolumeModal()">×</button>
        </div>
        <form id="backup-volume-form" onsubmit="executeBackupVolume(event)">
          <div class="modal-body">
            <p>Create a backup of volume: <strong id="backup-volume-name"></strong></p>
            <div class="form-group">
              <label for="backup-path">Backup Directory:</label>
              <input 
                type="text" 
                id="backup-path" 
                required 
                placeholder="/path/to/backup/directory"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                spellcheck="false"
              />
              <small>The backup will be saved as volume-backup.tar.gz in this directory</small>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closeBackupVolumeModal()">Cancel</button>
            <button type="submit" class="btn btn-primary">Create Backup</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Restore Volume Modal -->
    <div id="restore-volume-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Restore Volume</h3>
          <button class="modal-close" onclick="closeRestoreVolumeModal()">×</button>
        </div>
        <form id="restore-volume-form" onsubmit="executeRestoreVolume(event)">
          <div class="modal-body">
            <p>Restore data to volume: <strong id="restore-volume-name"></strong></p>
            <div class="form-group">
              <label for="restore-file">Backup File (.tar.gz):</label>
              <input 
                type="text" 
                id="restore-file" 
                required 
                placeholder="/path/to/volume-backup.tar.gz"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                spellcheck="false"
              />
              <small>Warning: This will replace all data in the volume</small>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closeRestoreVolumeModal()">Cancel</button>
            <button type="submit" class="btn btn-warning">Restore Volume</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Container Monitoring Modal -->
    <div id="monitoring-modal" class="modal monitoring-modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>Container Monitoring: <span id="monitoring-container-name"></span></h3>
          <button class="modal-close" onclick="closeMonitoringModal()">&times;</button>
        </div>
        <div class="modal-body">
          <!-- Stats Cards -->
          <div class="stats-cards-grid">
            <div class="monitoring-stat-card">
              <div class="stat-icon cpu">CPU</div>
              <div>
                <div class="stat-label">CPU Usage</div>
                <div class="stat-value" id="monitor-cpu">0%</div>
              </div>
            </div>
            <div class="monitoring-stat-card">
              <div class="stat-icon memory">RAM</div>
              <div>
                <div class="stat-label">Memory Usage</div>
                <div class="stat-value" id="monitor-memory">0 MB</div>
                <div class="stat-sublabel" id="monitor-memory-percent">0%</div>
              </div>
            </div>
            <div class="monitoring-stat-card">
              <div class="stat-icon network">NET</div>
              <div>
                <div class="stat-label">Network I/O</div>
                <div class="stat-value-small">
                  <span>RX <span id="monitor-network-rx">0 KB</span></span>
                  <span>TX <span id="monitor-network-tx">0 KB</span></span>
                </div>
              </div>
            </div>
            <div class="monitoring-stat-card">
              <div class="stat-icon disk">DISK</div>
              <div>
                <div class="stat-label">Disk I/O</div>
                <div class="stat-value-small">
                  <span>R <span id="monitor-disk-read">0 KB</span></span>
                  <span>W <span id="monitor-disk-write">0 KB</span></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Charts -->
          <div class="charts-section">
            <div class="charts-header">
              <h3>Resource Usage History</h3>
              <div class="chart-type-selector">
                <button class="chart-type-btn active" data-chart-type="line" onclick="changeChartType('line')" data-tooltip="Line Chart">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                </button>
                <button class="chart-type-btn" data-chart-type="area" onclick="changeChartType('area')" data-tooltip="Area Chart">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M18 17V9l-5 5-3-3-4 4"/><path d="M18 17H6"/></svg>
                </button>
                <button class="chart-type-btn" data-chart-type="bar" onclick="changeChartType('bar')" data-tooltip="Bar Chart">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg>
                </button>
              </div>
            </div>
            <div class="charts-container">
              <div class="chart-wrapper">
                <h4>CPU Usage</h4>
                <canvas id="cpu-chart"></canvas>
              </div>
              <div class="chart-wrapper">
                <h4>Memory Usage</h4>
                <canvas id="memory-chart"></canvas>
              </div>
            </div>
          </div>

          <!-- Alerts -->
          <div id="monitoring-alerts" class="monitoring-alerts"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeMonitoringModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Modal: Template Details -->
    <div id="template-details-modal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2>Template Details</h2>
          <button class="close-btn" onclick="closeTemplateDetailsModal()">×</button>
        </div>
        <div class="modal-body">
          <!-- Template details will be loaded here -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" onclick="closeTemplateDetailsModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Modal: Create/Edit Template -->
    <div id="create-template-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create Custom Template</h2>
          <button class="close-btn" onclick="closeCreateTemplateModal()">×</button>
        </div>
        <form id="create-template-form" class="modal-body" onsubmit="handleCreateTemplate(event)">
          <div class="form-group">
            <label for="template-name">Template Name:</label>
            <input type="text" id="template-name" required placeholder="My Custom Template" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </div>

          <div class="form-group">
            <label for="template-description">Description:</label>
            <textarea id="template-description" required placeholder="Describe this template..." rows="3" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
          </div>

          <div class="form-group">
            <label for="template-icon">Icon:</label>
            <input type="text" id="template-icon" value="*" maxlength="2" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </div>

          <div class="form-group">
            <label>Database Configurations:</label>
            <p class="form-help-text">Select which databases this template supports and configure them</p>
            <div id="template-db-configs" class="template-db-configs">
              <!-- Database configurations will be added here -->
            </div>
            <button type="button" class="btn btn-ghost btn-sm" onclick="addTemplateDbConfig()">
              + Add Database Configuration
            </button>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-ghost" onclick="closeCreateTemplateModal()">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Template</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal: Pull Docker Image -->
    <div id="pull-image-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Pull Docker Image</h2>
          <button class="modal-close" onclick="closePullImageModal()">×</button>
        </div>
        <form id="pull-image-form" class="modal-body" onsubmit="handlePullImage(event)">
          <div class="form-group">
            <label for="image-name">Image Name</label>
            <input
              type="text"
              id="image-name"
              placeholder="e.g., postgres:15, nginx:latest, redis:7"
              required
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
            />
            <small style="color: var(--text-secondary); display: block; margin-top: 4px;">Enter the full image name with tag (e.g., postgres:15)</small>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closePullImageModal()">
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">
              Pull Image
            </button>
          </div>
        </form>
      </div>
    </div>

        </div>
      </main>

      <!-- Footer -->
      <footer>
        <p>Docker DB Manager • Updated: <span id="footer-time"></span></p>
      </footer>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay">
      <div id="loading-spinner"></div>
      <div id="loading-text">Loading...</div>
    </div>
  </body>
</html>
